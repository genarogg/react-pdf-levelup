FROM node:22 AS builder

WORKDIR /app

# Copiamos archivos de configuraci칩n
COPY package.json turbo.json ./
COPY docs/package.json ./docs/

# Instalamos dependencias
RUN npm install

# Copiamos c칩digo fuente
COPY docs ./docs

# Construimos el sitio est치tico
WORKDIR /app/docs
RUN npm run build

# Servimos con Nginx
FROM nginx:alpine AS runner

# Copiamos los archivos est치ticos generados al directorio de Nginx
COPY --from=builder /app/docs/dist /usr/share/nginx/html

# Exponemos el puerto 80
EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
