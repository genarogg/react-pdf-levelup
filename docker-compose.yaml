services:
  backend:
    build:
      context: .
      dockerfile: backend/Dockerfile
    container_name: monorepo-backend
    ports:
      - "${BACKEND_PORT}:${BACKEND_PORT}"
    env_file:
      - .env
    volumes:
      - backend_data:/app/prisma
    networks:
      - monorepo-network

  frontend:
    build:
      context: .
      dockerfile: frontend/Dockerfile
      args:
        VITE_API_URL: ${VITE_API_URL}
    container_name: monorepo-frontend
    ports:
      - "${FRONTEND_PORT}:${FRONTEND_PORT}"
    env_file:
      - .env
    depends_on:
      - backend
    networks:
      - monorepo-network

  docs:
    build:
      context: .
      dockerfile: docs/Dockerfile
    container_name: monorepo-docs
    ports:
      - "${DOCS_HOST_PORT}:${DOCS_CONTAINER_PORT}"
    env_file:
      - .env
    networks:
      - monorepo-network

volumes:
  backend_data:

networks:
  monorepo-network:
    driver: bridge
